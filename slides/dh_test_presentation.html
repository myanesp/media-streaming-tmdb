<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Behind the Screen</title>
    <meta charset="utf-8" />
    <meta name="author" content="Mario Yanes and Isabela Zeberio" />
    <meta name="date" content="2023-03-24" />
    <script src="libs/header-attrs-2.20/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/metropolis.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.10.1/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <script src="libs/jquery-3.5.1/jquery.min.js"></script>
    <link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Behind the Screen
]
.subtitle[
## Webscraping for Insights into Movie and TV Series Data
]
.author[
### Mario Yanes and Isabela Zeberio
]
.date[
### 2023-03-24
]

---









## Index

-   The Movie DataBase

-   Library `tmdbR`

-   Data visualization

-   Limitations

---


## The Movie DataBase

-   Extract information on top 20 daily and weekly movies and series

-   Extract media content's genre and recode it into categories

![](img/screenshot_tmdb.png)

---

## **`library(tmdbR)`**


```r
remotes::install_github("myanesp/tmdbR")
```

-   Package with 22 functions
-   We will be adding more features to the package

|                                                                          |
|------------------------|---------------------|---------------------------|
| get_top_rated_movies() | get_trending_day()  | get_upcoming()            |
| get_top_rated_tv()     | get_trending_week() | get_in_cinemas()          |
| get_streaming_df()     | get_details()       | get_streaming_providers() |
| transform_genres()     | add_details()       | search_tmdb()             |

---
## Data visualization

<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d221f31cf6b30aa70b5e" style="width:100%;height:432px;"></div>
<script type="application/json" data-for="htmlwidget-d221f31cf6b30aa70b5e">{"x":{"data":[{"orientation":"h","width":[0.899999999999999,0.899999999999999,0.899999999999999],"base":[0,0,0],"x":[93.196,145.884,114.041],"y":[11,14,12],"text":["popularity:  93.196<br />Subgenres:  Action & Adventure, Animation, Sci-Fi & Fantasy","popularity: 145.884<br />Subgenres:  Action & Adventure, Comedy, Animation","popularity: 114.041<br />Subgenres:  Action & Adventure, Animation"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(95,70,144,0.55)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Action & Adventure","legendgroup":"Action & Adventure","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":[0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.9,0.899999999999999],"base":[0,0,0,0,0,0,0,0,0,0,0],"x":[74.013,82.228,331.824,510.889,55.99,82.494,138.685,14.134,200.619,65.737,368.845],"y":[6,8,16,19,4,9,13,2,15,5,17],"text":["popularity:  74.013<br />Subgenres:  Animation, Sci-Fi & Fantasy, Action & Adventure, Drama","popularity:  82.228<br />Subgenres:  Animation, Action & Adventure, Sci-Fi & Fantasy","popularity: 331.824<br />Subgenres:  Animation, Comedy","popularity: 510.889<br />Subgenres:  Animation, Comedy, Sci-Fi & Fantasy, Action & Adventure","popularity:  55.990<br />Subgenres:  Animation","popularity:  82.494<br />Subgenres:  Animation, Comedy, Drama","popularity: 138.685<br />Subgenres:  Animation, Sci-Fi & Fantasy, Action & Adventure","popularity:  14.134<br />Subgenres:  Animation, Comedy","popularity: 200.619<br />Subgenres:  Animation, Sci-Fi & Fantasy, Family, Action & Adventure, Comedy","popularity:  65.737<br />Subgenres:  Animation, Sci-Fi & Fantasy, Action & Adventure, Drama","popularity: 368.845<br />Subgenres:  Animation, Action & Adventure, Sci-Fi & Fantasy, Comedy"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(29,105,150,0.55)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Animation","legendgroup":"Animation","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":0.9,"base":0,"x":[19.694],"y":[3],"text":"popularity:  19.694<br />Subgenres:  Comedy, Animation","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(56,166,165,0.55)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Comedy","legendgroup":"Comedy","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":[0.899999999999999,0.899999999999999,0.9],"base":[0,0,0],"x":[446.517,87.278,80.451],"y":[18,10,7],"text":["popularity: 446.517<br />Subgenres:  Drama","popularity:  87.278<br />Subgenres:  Drama, Sci-Fi & Fantasy, Comedy","popularity:  80.451<br />Subgenres:  Drama, Family"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(15,133,84,0.55)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Drama","legendgroup":"Drama","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":0.9,"base":0,"x":[14.104],"y":[1],"text":"popularity:  14.104<br />Subgenres:  Reality","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(115,175,72,0.55)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Reality","legendgroup":"Reality","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":23.3059360730594,"r":7.30593607305936,"b":37.2602739726027,"l":218.447488584475},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-25.54445,536.43345],"tickmode":"array","ticktext":["0","100","200","300","400","500"],"tickvals":[0,100,200,300,400,500],"categoryorder":"array","categoryarray":["0","100","200","300","400","500"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"Popularity","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,19.6],"tickmode":"array","ticktext":["The D'Amelio Show","Hitoribocchi no Marumaruseikatsu","Asobi Asobase - workshop of fun -","DARLING in the FRANXX","Invincible","Arcane","Anne with an E","Avatar: The Last Airbender","Kaguya-sama: Love Is War","Goblin","Fullmetal Alchemist: Brotherhood","My Hero Academia","Demon Slayer: Kimetsu no Yaiba","One Piece","The Owl House","Regular Show","Chainsaw Man","Breaking Bad","Rick and Morty"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],"categoryorder":"array","categoryarray":["The D'Amelio Show","Hitoribocchi no Marumaruseikatsu","Asobi Asobase - workshop of fun -","DARLING in the FRANXX","Invincible","Arcane","Anne with an E","Avatar: The Last Airbender","Kaguya-sama: Love Is War","Goblin","Fullmetal Alchemist: Brotherhood","My Hero Academia","Demon Slayer: Kimetsu no Yaiba","One Piece","The Owl House","Regular Show","Chainsaw Man","Breaking Bad","Rick and Morty"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Series Titles","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":"Genres"},"hovermode":"closest","barmode":"relative","title":"Most Popular Series by Genre"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11957b770afb":{"x":{},"y":{},"fill":{},"alpha":{},"text":{},"type":"bar"}},"cur_data":"11957b770afb","visdat":{"11957b770afb":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>


---
## Data visualization

<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-195c9e8d3b57f6b05b26" style="width:100%;height:432px;"></div>
<script type="application/json" data-for="htmlwidget-195c9e8d3b57f6b05b26">{"x":{"data":[{"x":[94000000],"y":[1024888979],"text":"budget:  94000000<br />profits: 1024888979<br />revenue: 1118888979<br />genre1: Adventure<br />Title:  The Lord of the Rings: The Return of the King","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(95,70,144,1)","opacity":0.7,"size":75.5905511811024,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(95,70,144,1)"}},"hoveron":"points","name":"Adventure","legendgroup":"Adventure","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19000000],"y":[255925095],"text":"budget:  19000000<br />profits:  255925095<br />revenue:  274925095<br />genre1: Animation<br />Title:  Spirited Away","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(29,105,150,1)","opacity":0.7,"size":41.2355276506937,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(29,105,150,1)"}},"hoveron":"points","name":"Animation","legendgroup":"Animation","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[13200000,55000000,11363000],"y":[86800000,622387716,246228776],"text":["budget:  13200000<br />profits:   86800000<br />revenue:  100000000<br />genre1: Comedy<br />Title:  Dilwale Dulhania Le Jayenge","budget:  55000000<br />profits:  622387716<br />revenue:  677387716<br />genre1: Comedy<br />Title:  Forrest Gump","budget:  11363000<br />profits:  246228776<br />revenue:  257591776<br />genre1: Comedy<br />Title:  Parasite"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(56,166,165,1)","opacity":0.7,"size":[27.8045446104846,60.4776787563813,40.1526340420756],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(56,166,165,1)"}},"hoveron":"points","name":"Comedy","legendgroup":"Comedy","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6000000,25000000,13000000,22000000,185000000,350000,25000000],"y":[239066411,3341469,89600000,299365567,819558444,650000,21835000],"text":["budget:   6000000<br />profits:  239066411<br />revenue:  245066411<br />genre1: Drama<br />Title:  The Godfather","budget:  25000000<br />profits:    3341469<br />revenue:   28341469<br />genre1: Drama<br />Title:  The Shawshank Redemption","budget:  13000000<br />profits:   89600000<br />revenue:  102600000<br />genre1: Drama<br />Title:  The Godfather Part II","budget:  22000000<br />profits:  299365567<br />revenue:  321365567<br />genre1: Drama<br />Title:  Schindler's List","budget: 185000000<br />profits:  819558444<br />revenue: 1004558444<br />genre1: Drama<br />Title:  The Dark Knight","budget:    350000<br />profits:     650000<br />revenue:    1000000<br />genre1: Drama<br />Title:  12 Angry Men","budget:  25000000<br />profits:   21835000<br />revenue:   46835000<br />genre1: Drama<br />Title:  GoodFellas"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(15,133,84,1)","opacity":0.7,"size":[39.3471639834314,18.1985646144449,28.0686715446072,43.978523338021,72.0178258466993,7.55905511811024,21.3346163674728],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(15,133,84,1)"}},"hoveron":"points","name":"Drama","legendgroup":"Drama","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[60000000],"y":[226801374],"text":"budget:  60000000<br />profits:  226801374<br />revenue:  286801374<br />genre1: Fantasy<br />Title:  The Green Mile","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(115,175,72,1)","opacity":0.7,"size":41.9578193099568,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(115,175,72,1)"}},"hoveron":"points","name":"Fantasy","legendgroup":"Fantasy","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[8000000],"y":[206179088],"text":"budget:   8000000<br />profits:  206179088<br />revenue:  214179088<br />genre1: Thriller<br />Title:  Pulp Fiction","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(237,173,8,1)","opacity":0.7,"size":37.2677096917531,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(237,173,8,1)"}},"hoveron":"points","name":"Thriller","legendgroup":"Thriller","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1200000],"y":[24053887],"text":"budget:   1200000<br />profits:   24053887<br />revenue:   25253887<br />genre1: Western<br />Title:  The Good, the Bad and the Ugly","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(225,124,5,1)","opacity":0.7,"size":17.5798312322357,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(225,124,5,1)"}},"hoveron":"points","name":"Western","legendgroup":"Western","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":40.8401826484018,"r":7.30593607305936,"b":37.2602739726027,"l":101.552511415525},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"Profit vs Budget Bubble Chart","xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-8882500,194232500],"tickmode":"array","ticktext":["0","50,000,000","100,000,000","150,000,000"],"tickvals":[0,50000000,100000000,150000000],"categoryorder":"array","categoryarray":["0","50,000,000","100,000,000","150,000,000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"Budget","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-50561948.95,1076100927.95],"tickmode":"array","ticktext":["0","250,000,000","500,000,000","750,000,000","1,000,000,000"],"tickvals":[0,250000000,500000000,750000000,1000000000],"categoryorder":"array","categoryarray":["0","250,000,000","500,000,000","750,000,000","1,000,000,000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Profits","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":"Genres"},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1195755e65d39":{"x":{},"y":{},"size":{},"colour":{},"text":{},"type":"scatter"}},"cur_data":"1195755e65d39","visdat":{"1195755e65d39":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

---

## Streaming providers


```r
cocaine_bear &lt;- get_streaming_providers(804150, "movie", "US")
fall &lt;- get_streaming_providers(985939, "movie", "ES")
godfather &lt;- get_streaming_providers(238, "movie", "US")
streaming &lt;- c(cocaine_bear, fall, godfather)
streaming
```

```
## [1] "The provided movie is not available on the country you have selected."
## [2] "You can watch the requested movie in ES on Movistar Plus"             
## [3] "You can watch the requested movie in US on Peacock Premium"
```

---

## Search

```r
search_tmdb("all") %&gt;%
  select(id, title, media_type) %&gt;% 
  head(10)
```

```
##         id                             title media_type
## 1    49046    All Quiet on the Western Front      movie
## 2  1078862                    All the Places      movie
## 3    99966                All of Us Are Dead         tv
## 4   823999          Diabolik - Ginko Attacks      movie
## 5   112470                Here it all begins         tv
## 6   545611 Everything Everywhere All at Once      movie
## 7   760620                               All      movie
## 8    16664          All About Lily Chou-Chou      movie
## 9   218428            In Love All Over Again         tv
## 10  108466                     Alle mot alle         tv
```

---

## **`add_details()`**




```r
get_details(545611, "movie", "budget")
```

```
##                               title     id   budget
## 1 Everything Everywhere All at Once 545611 25000000
```

```r
head(rev_budget)
```

```
## # A tibble: 6 Ã— 3
##   title                         revenue   budget
##   &lt;chr&gt;                           &lt;int&gt;    &lt;int&gt;
## 1 The Godfather               245066411  6000000
## 2 The Shawshank Redemption     28341469 25000000
## 3 Cuando Sea Joven                    0        0
## 4 The Godfather Part II       102600000 13000000
## 5 Schindler's List            321365567 22000000
## 6 Dilwale Dulhania Le Jayenge 100000000 13200000
```

---

## Limitations

- Selenium
    Our intention was to obtain the top rated movies filtering by year of their release.
    Unfortunately, we couldn't achieve it... but the code is written!
    
- Some functions of the package need to be more complete (like `add_detail()`)

---

## Thanks for your attention!

Any question, suggestion or comment? Feel free!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
